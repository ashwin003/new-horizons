"use strict";(self.webpackChunkhorizons=self.webpackChunkhorizons||[]).push([[2],{7002:(R,C,a)=>{a.r(C),a.d(C,{CritterModule:()=>$});var s=a(9808),c=a(4894),U=a(5616),b=a(3659),p=a(1446),_=a(6696),O=a(7520),t=a(5e3),m=a(3251),g=a(5245),l=a(8966),f=a(4004),h=a(3824),A=a(6573),T=a(379),d=a(4594),Z=a(7423);let v=(()=>{class n{constructor(){}getCurrentMonth(){return(new Date).getMonth()}getDayOffsetPercentage(){const e=new Date,i=new Date;return i.setHours(0,0,0,0),(e.getTime()-i.getTime())/1e3/60/60*100/24}isWithinAvailableHours(e){const i=new Date;return e.includes(i.getHours())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function P(n,r){if(1&n&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&n){const e=r.$implicit,i=r.index,o=t.oxw();t.ekj("available",o.isAvailable(i))("current",i==o.currentMonth),t.xp6(1),t.hij("\n    ",e,"\n  ")}}let x=(()=>{class n{constructor(e){this.timeService=e,this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.availableMonths=[],this.currentMonth=0}ngOnInit(){this.currentMonth=this.timeService.getCurrentMonth()}isAvailable(e){return this.availableMonths.includes(e+1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-seasonality"]],inputs:{availableMonths:"availableMonths"},decls:14,vars:1,consts:[["color","primary"],["translate",""],[1,"container"],["class","month open-sans","translate","",3,"available","current",4,"ngFor","ngForOf"],["translate","",1,"month","open-sans"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0),t._uU(1,"\n  "),t.TgZ(2,"mat-icon"),t._uU(3,"event"),t.qZA(),t._uU(4,"\xa0\n  "),t.TgZ(5,"span",1),t._uU(6,"Seasonality"),t.qZA(),t._uU(7,"\n"),t.qZA(),t._uU(8,"\n"),t.TgZ(9,"div",2),t._uU(10,"\n  "),t.YNc(11,P,2,5,"div",3),t._uU(12,"\n"),t.qZA(),t._uU(13,"\n")),2&e&&(t.xp6(11),t.Q6J("ngForOf",i.months))},directives:[d.Ye,g.Hw,c.Pi,s.sg],styles:[".mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1em;text-transform:uppercase}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:1em;gap:1em}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%]{margin-bottom:1em}}.container[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{padding:.5em 1em;border-radius:.5em;text-transform:uppercase;border:2px solid transparent}.container[_ngcontent-%COMP%]   .month.available[_ngcontent-%COMP%]{background:#80808042}.container[_ngcontent-%COMP%]   .month.current[_ngcontent-%COMP%]{border-color:#f50057}@media (prefers-color-scheme: dark){.container[_ngcontent-%COMP%]   .month.current[_ngcontent-%COMP%]{border-color:#c6ff00}}"]}),n})();var y=a(4834);function S(n,r){if(1&n&&(t.TgZ(0,"div",5),t._uU(1,"\n    "),t._UZ(2,"mat-divider",6),t.ALo(3,"translate"),t._uU(4,"\n  "),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.ekj("full",i.needsFullHeight(e))("active",i.isActiveIn(e)),t.uIk("data-hour",i.convertTo12Hour(e))("data-tod",t.lcZ(3,6,i.toTOD(e)))}}let w=(()=>{class n{constructor(e){this.timeService=e,this.hours=Array.from(Array(24).keys()),this.dayPercent=0,this.activeHours=[]}ngOnInit(){this.dayPercent=this.timeService.getDayOffsetPercentage()}needsFullHeight(e){return e%6==0}isActiveIn(e){return this.activeHours.includes(e)}convertTo12Hour(e){return 0==e?12:e>12?e-12:e}toTOD(e){return e<12?"AM":"PM"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-active-hours"]],inputs:{activeHours:"activeHours"},decls:16,vars:3,consts:[["color","primary"],["translate",""],[1,"current-time"],[1,"container"],["class","hour",4,"ngFor","ngForOf"],[1,"hour"],["vertical","true",1,"divider"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0),t._uU(1,"\n  "),t.TgZ(2,"mat-icon"),t._uU(3,"schedule"),t.qZA(),t._uU(4,"\xa0\n  "),t.TgZ(5,"span",1),t._uU(6,"Active Hours"),t.qZA(),t._uU(7,"\n"),t.qZA(),t._uU(8,"\n"),t._UZ(9,"span",2),t._uU(10,"\n"),t.TgZ(11,"div",3),t._uU(12,"\n  "),t.YNc(13,S,5,8,"div",4),t._uU(14,"\n"),t.qZA(),t._uU(15,"\n")),2&e&&(t.xp6(9),t.Udp("left",i.dayPercent+"%"),t.xp6(4),t.Q6J("ngForOf",i.hours))},directives:[d.Ye,g.Hw,c.Pi,s.sg,y.d],pipes:[c.X$],styles:['.mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1em;text-transform:uppercase}.current-time[_ngcontent-%COMP%]{position:absolute;width:2px;height:50%;background:#f50057;bottom:0}@media (prefers-color-scheme: dark){.current-time[_ngcontent-%COMP%]{background:#c6ff00}}.container[_ngcontent-%COMP%]{height:calc(100% - 5.25em);min-height:150px;display:grid;grid-template-columns:repeat(24,1fr);border-bottom:1px solid rgba(0,0,0,.12)}@media screen and (max-width: 1000px){.container[_ngcontent-%COMP%]{margin-bottom:1em}}@media (prefers-color-scheme: dark){.container[_ngcontent-%COMP%]{border-bottom-color:#ffffff1f}}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:50%}.container[_ngcontent-%COMP%]   .divider.full[_ngcontent-%COMP%]{height:100%;position:relative}.container[_ngcontent-%COMP%]   .divider.full[_ngcontent-%COMP%]:before{content:attr(data-hour);font-family:Open Sans,sans-serif;position:absolute;left:10%}.container[_ngcontent-%COMP%]   .divider[data-hour="12"][_ngcontent-%COMP%]:after{content:attr(data-tod);font-family:Open Sans,sans-serif;position:relative;left:120%}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:not(.full){position:relative;top:50%}.container[_ngcontent-%COMP%]   .divider.active[_ngcontent-%COMP%]{background:#80808042}@media (prefers-color-scheme: dark){.container[_ngcontent-%COMP%]   .divider.active[_ngcontent-%COMP%]{background:rgba(255,255,255,.12)}}']}),n})(),H=(()=>{class n{constructor(e,i,o,u,M){this.translationService=e,this.hemisphereSelectorService=i,this.savedEntityService=o,this.data=u,this.dialogRef=M,this.icon$=this.savedEntityService.isSaved(this.data["file-name"]).pipe((0,f.U)(E=>E?"star":"star_border"))}ngOnInit(){}toggleSaveState(){this.savedEntityService.isSaved(this.data["file-name"]).subscribe(e=>{e?this.savedEntityService.remove(this.data["file-name"]):this.savedEntityService.save(this.data["file-name"],this.data.entityType),this.dialogRef.close()})}getValue(e,i){return this.translationService.getValue(e,i)}get availableMonths(){return"southern"==this.hemisphereSelectorService.getHemisphere()?this.data.availability.monthArraySouthern:this.data.availability.monthArrayNorthern}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.D),t.Y36(A.s),t.Y36(T.v),t.Y36(l.WI),t.Y36(l.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-critter-modal"]],decls:27,vars:7,consts:[["color","primary",1,"open-sans"],["mat-dialog-title",""],[1,"spacer"],["mat-icon-button","",3,"click"],[1,"container"],["defaultImage","assets/villagers.png",1,"critter-image",3,"lazyLoad"],[1,"seasonality",3,"availableMonths"],[1,"active-hours",3,"activeHours"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0),t._uU(1,"\n  "),t.TgZ(2,"h2",1),t._uU(3),t.qZA(),t._uU(4,"\n  "),t._UZ(5,"span",2),t._uU(6,"\n  "),t.TgZ(7,"button",3),t.NdJ("click",function(){return i.toggleSaveState()}),t._uU(8,"\n    "),t.TgZ(9,"mat-icon"),t._uU(10),t.ALo(11,"async"),t.qZA(),t._uU(12,"\n  "),t.qZA(),t._uU(13,"\n"),t.qZA(),t._uU(14,"\n"),t.TgZ(15,"mat-dialog-content"),t._uU(16,"\n  "),t.TgZ(17,"div",4),t._uU(18,"\n    "),t._UZ(19,"img",5),t._uU(20,"\n    "),t._UZ(21,"app-seasonality",6),t._uU(22,"\n    "),t._UZ(23,"app-active-hours",7),t._uU(24,"\n  "),t.qZA(),t._uU(25,"\n"),t.qZA(),t._uU(26,"\n")),2&e&&(t.xp6(3),t.Oqu(i.getValue(i.data.name,"name")),t.xp6(7),t.Oqu(t.lcZ(11,5,i.icon$)),t.xp6(9),t.Q6J("lazyLoad",i.data.image_uri),t.xp6(2),t.Q6J("availableMonths",i.availableMonths),t.xp6(2),t.Q6J("activeHours",i.data.availability.timeArray))},directives:[d.Ye,l.uh,Z.lW,g.Hw,l.xY,p.z1,x,w],pipes:[s.Ov],styles:[".mat-dialog-title[_ngcontent-%COMP%]{text-transform:uppercase}.mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;margin:0;padding:24px}@media screen and (min-width: 1000px){.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);grid-row-gap:1em;row-gap:1em}}.container[_ngcontent-%COMP%]   .critter-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;justify-self:center}@media screen and (min-width: 1000px){.container[_ngcontent-%COMP%]   .critter-image[_ngcontent-%COMP%]{grid-row:1/-1}}.container[_ngcontent-%COMP%]   .seasonality[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .active-hours[_ngcontent-%COMP%]{position:relative}@media screen and (min-width: 1000px){.container[_ngcontent-%COMP%]   .seasonality[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .active-hours[_ngcontent-%COMP%]{grid-column:2/2}}"]}),n})();var Y=a(520);let F=(()=>{class n{constructor(e){this.httpClient=e}getAll(e){return this.httpClient.get("/v1/"+e).pipe((0,f.U)(i=>Object.keys(i).map(o=>this.convertToCritter(i[o]))))}convertToCritter(e){return e.availability={monthArrayNorthern:e.availability["month-array-northern"],monthArraySouthern:e.availability["month-array-southern"],timeArray:e.availability["time-array"]},e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D=a(7446),N=a(9772);let J=(()=>{class n{constructor(e,i){this.translationService=e,this.timeService=i,this.critter={icon_uri:"assets/villagers.png",image_uri:"assets/villagers.png",name:new Map,availability:{monthArrayNorthern:[0],monthArraySouthern:[0],timeArray:[0]}},this.highlightAvailable=!1}get highlighted(){return this.highlightAvailable&&this.critter.availability.monthArrayNorthern.includes(this.timeService.getCurrentMonth()+1)&&this.timeService.isWithinAvailableHours(this.critter.availability.timeArray)}ngOnInit(){}getValue(e,i){return this.translationService.getValue(e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.D),t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-critter-tile"]],inputs:{critter:"critter",highlightAvailable:"highlightAvailable"},decls:2,vars:5,consts:[["defaultImage","assets/villagers.png","tabindex","-1",1,"critter-icon",3,"lazyLoad","matTooltip"]],template:function(e,i){1&e&&(t._UZ(0,"img",0),t._uU(1,"\n")),2&e&&(t.ekj("highlighted",i.highlighted),t.Q6J("lazyLoad",i.critter.icon_uri)("matTooltip",i.getValue(i.critter.name,"name")),t.uIk("alt",i.getValue(i.critter.name,"name")))},directives:[p.z1,N.gM],styles:[".critter-icon[_ngcontent-%COMP%]{transform:scale(.5)}.critter-icon.highlighted[_ngcontent-%COMP%]{filter:drop-shadow(2px 5px 10px currentColor)}"]}),n})();function k(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-critter-tile",4),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().openDialog(u)}),t._uU(1,"\n  "),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.Q6J("critter",e)("highlightAvailable",i.highlightAvailable)}}let I=(()=>{class n{constructor(e,i,o){this.critterService=e,this.translationService=i,this.matDialog=o,this.critter="",this.entityType="",this.data=[],this.highlightAvailable=!1}ngOnInit(){this.critterService.getAll(this.critter).subscribe(e=>this.data=e)}checkboxChanged(e){this.highlightAvailable=e.checked}openDialog(e){e.entityType=this.entityType,this.matDialog.open(H,{data:e})}get columnCount(){return 0==this.data.length?1:this.data.length/5}getValue(e,i){return this.translationService.getValue(e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(F),t.Y36(h.D),t.Y36(l.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-critter-board"]],inputs:{critter:"critter",entityType:"entityType"},decls:16,vars:6,consts:[[1,"highlight-container"],[1,"highlight-check",3,"change"],["translate",""],["class","tile","tabindex","0",3,"critter","highlightAvailable","click",4,"ngFor","ngForOf"],["tabindex","0",1,"tile",3,"critter","highlightAvailable","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"mat-checkbox",1),t.NdJ("change",function(u){return i.checkboxChanged(u)}),t._uU(3,"\n    "),t.TgZ(4,"span",2),t._uU(5,"Highlight currently available"),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n"),t.qZA(),t._uU(8,"\n"),t._UZ(9,"mat-divider"),t._uU(10,"\n"),t.TgZ(11,"div"),t._uU(12,"\n  "),t.YNc(13,k,2,2,"app-critter-tile",3),t._uU(14,"\n"),t.qZA(),t._uU(15,"\n")),2&e&&(t.xp6(11),t.Gre("container ",i.critter,""),t.Udp("grid-template-columns","repeat("+i.columnCount+", 1fr)"),t.xp6(2),t.Q6J("ngForOf",i.data))},directives:[D.oG,c.Pi,y.d,s.sg,J],styles:[".highlight-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:1em;position:fixed;width:100vw}.container[_ngcontent-%COMP%]{overflow-x:hidden;display:grid!important;grid-template-rows:repeat(5,1fr);grid-auto-flow:column;grid-gap:1em;gap:1em;position:relative;top:1em}@media screen and (min-width: 500px){.container[_ngcontent-%COMP%]{margin:1em}}.container.fish[_ngcontent-%COMP%], .container.bugs[_ngcontent-%COMP%]{width:125%}@media screen and (max-width: 500px){.container.fish[_ngcontent-%COMP%], .container.bugs[_ngcontent-%COMP%]{width:300%}}@media screen and (max-width: 500px){.container.sea[_ngcontent-%COMP%]{width:300%}}.container[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:max-content;border-radius:1em;cursor:pointer}.container[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]:hover{background:#80808042}"]}),n})();function z(n,r){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"pest_control"),t.qZA(),t._uU(2,"\xa0"),t.TgZ(3,"span",2),t._uU(4,"Insects"),t.qZA())}function q(n,r){1&n&&(t._uU(0," "),t._UZ(1,"app-critter-board",3),t._uU(2," "))}function B(n,r){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"set_meal"),t.qZA(),t._uU(2,"\xa0"),t.TgZ(3,"span",2),t._uU(4,"Fish"),t.qZA())}function j(n,r){1&n&&(t._uU(0," "),t._UZ(1,"app-critter-board",4),t._uU(2," "))}function V(n,r){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"waves"),t.qZA(),t._uU(2,"\xa0"),t.TgZ(3,"span",2),t._uU(4,"Sea Creatures"),t.qZA())}function Q(n,r){1&n&&(t._uU(0," "),t._UZ(1,"app-critter-board",5),t._uU(2," "))}const X=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-critter"]],decls:24,vars:0,consts:[["mat-tab-label",""],["matTabContent",""],["translate",""],["critter","bugs","entityType","Bug"],["critter","fish","entityType","Fish"],["critter","sea","entityType","Sea"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group"),t._uU(1,"\n  "),t.TgZ(2,"mat-tab"),t._uU(3,"\n    "),t.YNc(4,z,5,0,"ng-template",0),t._uU(5,"\n    "),t.YNc(6,q,3,0,"ng-template",1),t._uU(7,"\n  "),t.qZA(),t._uU(8,"\n  "),t.TgZ(9,"mat-tab"),t._uU(10,"\n    "),t.YNc(11,B,5,0,"ng-template",0),t._uU(12,"\n    "),t.YNc(13,j,3,0,"ng-template",1),t._uU(14,"\n  "),t.qZA(),t._uU(15,"\n  "),t.TgZ(16,"mat-tab"),t._uU(17,"\n    "),t.YNc(18,V,5,0,"ng-template",0),t._uU(19,"\n    "),t.YNc(20,Q,3,0,"ng-template",1),t._uU(21,"\n  "),t.qZA(),t._uU(22,"\n"),t.qZA(),t._uU(23,"\n"))},directives:[m.SP,m.uX,m.uD,m.Vc,g.Hw,c.Pi,I],styles:[""]}),n})(),data:{title:(0,O.J)("Critter")}}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[_.Bz.forChild(X)],_.Bz]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.ez,c.aw,U.m8,b.q,p.mZ,L]]}),n})()}}]);