"use strict";(self.webpackChunkhorizons=self.webpackChunkhorizons||[]).push([[627],{7627:(W,U,s)=>{s.r(U),s.d(U,{MuseumModule:()=>R});var u=s(9808),m=s(4894),F=s(5616),O=s(3659),f=s(1446),C=s(6696),P=s(7520),t=s(5e3),g=s(3251),l=s(8966),d=s(4004),p=s(3824),h=s(379),y=s(4594),M=s(7423),Z=s(5245);let k=(()=>{class n{constructor(e,i,r,a){this.translationService=e,this.savedEntityService=i,this.data=r,this.dialogRef=a,this.icon$=this.savedEntityService.isSaved(this.data.fileName).pipe((0,d.U)(c=>c?"star":"star_border"))}ngOnInit(){}toggleSaveState(){this.savedEntityService.isSaved(this.data.fileName).subscribe(e=>{e?this.savedEntityService.remove(this.data.fileName):this.savedEntityService.save(this.data.fileName,"Fossil"),this.dialogRef.close()})}getValue(e,i){return this.translationService.getValue(e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.D),t.Y36(h.v),t.Y36(l.WI),t.Y36(l.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-fossil-modal"]],decls:18,vars:6,consts:[["color","primary",1,"open-sans"],["mat-dialog-title",""],[1,"spacer"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0),t._uU(1,"\n  "),t.TgZ(2,"h2",1),t._uU(3),t.qZA(),t._uU(4,"\n  "),t._UZ(5,"span",2),t._uU(6,"\n  "),t.TgZ(7,"button",3),t.NdJ("click",function(){return i.toggleSaveState()}),t._uU(8,"\n    "),t.TgZ(9,"mat-icon"),t._uU(10),t.ALo(11,"async"),t.qZA(),t._uU(12,"\n  "),t.qZA(),t._uU(13,"\n"),t.qZA(),t._uU(14,"\n"),t.TgZ(15,"mat-dialog-content"),t._uU(16," "),t.qZA(),t._uU(17,"\n")),2&e&&(t.xp6(3),t.Oqu(i.getValue(i.data.name,"name")),t.xp6(7),t.Oqu(t.lcZ(11,4,i.icon$)),t.xp6(5),t.Udp("background-image","url("+i.data.imageUri+")"))},directives:[y.Ye,l.uh,M.lW,Z.Hw,l.xY],pipes:[u.Ov],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;margin:0;padding:0 24px;min-width:20vw;aspect-ratio:1;background-size:contain;background-repeat:no-repeat}"]}),n})();var x=s(520);let N=(()=>{class n{constructor(e){this.httpClient=e}getAll(){return this.httpClient.get("/v1/fossils").pipe((0,d.U)(e=>Object.keys(e).map(i=>this.convertToFossil(e[i]))))}convertToFossil(e){return e.fileName=e["file-name"],e.museumPhrase=e["museum-phrase"],e.imageUri=e.image_uri,e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=s(7446),T=s(4834),S=s(9772);function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().openModal(a)}),t._uU(1,"\n    "),t._UZ(2,"img",6),t._uU(3,"\n  "),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("matTooltip",i.getValue(e.name,"name")),t.xp6(2),t.ekj("highlighted",i.isPending(e["file-name"])),t.Q6J("lazyLoad",e.imageUri)}}let z=(()=>{class n{constructor(e,i,r,a){this.fossilService=e,this.translationService=i,this.savedEntityService=r,this.matDialog=a,this.fossils=[],this.submittedFossils=[],this.highlightPending=!1}ngOnInit(){this.fossilService.getAll().subscribe(e=>this.fossils=this.sortData(e)),this.savedEntityService.getAll("Fossil").subscribe(e=>this.submittedFossils=e.map(i=>i.fileName))}isPending(e){return this.highlightPending&&!this.submittedFossils.includes(e)}checkboxChanged(e){this.highlightPending=e.checked}sortData(e){return e.sort(this.sorter)}sorter(e,i){const r=["skull","neck","chest","torso","pelvis","tail","tip"],a=e["part-of"],c=i["part-of"],b=_=>{const v=_.split("_");return r.indexOf(v[v.length-1])};return a===c?b(e.fileName)-b(i.fileName):a-c}getValue(e,i){return this.translationService.getValue(e,i)}openModal(e){this.matDialog.open(k,{data:e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N),t.Y36(p.D),t.Y36(h.v),t.Y36(l.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-fossils"]],decls:16,vars:1,consts:[[1,"highlight-container"],[1,"highlight-check",3,"change"],["translate",""],[1,"container"],["class","fossil",3,"matTooltip","click",4,"ngFor","ngForOf"],[1,"fossil",3,"matTooltip","click"],["defaultImage","assets/villagers.png",1,"fossil-icon",3,"lazyLoad"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"mat-checkbox",1),t.NdJ("change",function(a){return i.checkboxChanged(a)}),t._uU(3,"\n    "),t.TgZ(4,"span",2),t._uU(5,"Highlight pending"),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n"),t.qZA(),t._uU(8,"\n"),t._UZ(9,"mat-divider"),t._uU(10,"\n"),t.TgZ(11,"div",3),t._uU(12,"\n  "),t.YNc(13,Y,4,4,"div",4),t._uU(14,"\n"),t.qZA(),t._uU(15,"\n")),2&e&&(t.xp6(13),t.Q6J("ngForOf",i.fossils))},directives:[A.oG,m.Pi,T.d,u.sg,S.gM,f.z1],styles:[".highlight-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-right:1em}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(9,1fr);overflow-y:auto;height:calc(100vh - 112px);grid-gap:1em;gap:1em;margin:0;padding-top:1em}.container[_ngcontent-%COMP%]   .fossil[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:max-content;border-radius:8px;cursor:pointer}.container[_ngcontent-%COMP%]   .fossil[_ngcontent-%COMP%]:hover{background:#80808042}.container[_ngcontent-%COMP%]   .fossil[_ngcontent-%COMP%]   .fossil-icon.highlighted[_ngcontent-%COMP%]{filter:drop-shadow(2px 5px 10px currentColor)}"]}),n})(),E=(()=>{class n{constructor(e,i,r,a){this.translationService=e,this.savedEntityService=i,this.data=r,this.dialogRef=a,this.icon$=this.savedEntityService.isSaved(this.data.fileName).pipe((0,d.U)(c=>c?"star":"star_border"))}ngOnInit(){}toggleSaveState(){this.savedEntityService.isSaved(this.data.fileName).subscribe(e=>{e?this.savedEntityService.remove(this.data.fileName):this.savedEntityService.save(this.data.fileName,"Art"),this.dialogRef.close()})}getValue(e,i){return this.translationService.getValue(e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.D),t.Y36(h.v),t.Y36(l.WI),t.Y36(l.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-art-modal"]],decls:18,vars:6,consts:[["color","primary",1,"open-sans"],["mat-dialog-title",""],[1,"spacer"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-toolbar",0),t._uU(1,"\n  "),t.TgZ(2,"h2",1),t._uU(3),t.qZA(),t._uU(4,"\n  "),t._UZ(5,"span",2),t._uU(6,"\n  "),t.TgZ(7,"button",3),t.NdJ("click",function(){return i.toggleSaveState()}),t._uU(8,"\n    "),t.TgZ(9,"mat-icon"),t._uU(10),t.ALo(11,"async"),t.qZA(),t._uU(12,"\n  "),t.qZA(),t._uU(13,"\n"),t.qZA(),t._uU(14,"\n"),t.TgZ(15,"mat-dialog-content"),t._uU(16," "),t.qZA(),t._uU(17,"\n")),2&e&&(t.xp6(3),t.Oqu(i.getValue(i.data.name,"name")),t.xp6(7),t.Oqu(t.lcZ(11,4,i.icon$)),t.xp6(5),t.Udp("background-image","url("+i.data.imageUri+")"))},directives:[y.Ye,l.uh,M.lW,Z.Hw,l.xY],pipes:[u.Ov],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:95vh;margin:0;padding:0 24px;min-width:20vw;aspect-ratio:1;background-size:contain;background-repeat:no-repeat}"]}),n})(),J=(()=>{class n{constructor(e){this.httpClient=e}getAll(){return this.httpClient.get("/v1/art").pipe((0,d.U)(e=>Object.keys(e).map(i=>this.convertToArt(e[i]))))}convertToArt(e){return e.fileName=e["file-name"],e.museumPhrase=e["museum-desc"],e.imageUri=e.image_uri,e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().openModal(a)}),t._uU(1,"\n    "),t._UZ(2,"img",6),t._uU(3,"\n  "),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("matTooltip",i.getValue(e.name,"name")),t.xp6(2),t.ekj("highlighted",i.isPending(e["file-name"])),t.Q6J("lazyLoad",e.imageUri)}}let V=(()=>{class n{constructor(e,i,r,a){this.artService=e,this.translationService=i,this.savedEntityService=r,this.matDialog=a,this.artWorks=[],this.submittedArtworks=[],this.highlightPending=!1}ngOnInit(){this.artService.getAll().subscribe(e=>{this.artWorks=e}),this.savedEntityService.getAll("Art").subscribe(e=>this.submittedArtworks=e.map(i=>i.fileName))}isPending(e){return this.highlightPending&&!this.submittedArtworks.includes(e)}checkboxChanged(e){this.highlightPending=e.checked}getValue(e,i){return this.translationService.getValue(e,i)}openModal(e){this.matDialog.open(E,{data:e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(J),t.Y36(p.D),t.Y36(h.v),t.Y36(l.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-art"]],decls:16,vars:1,consts:[[1,"highlight-container"],[1,"highlight-check",3,"change"],["translate",""],[1,"container"],["class","art",3,"matTooltip","click",4,"ngFor","ngForOf"],[1,"art",3,"matTooltip","click"],["defaultImage","assets/villagers.png",1,"art-icon",3,"lazyLoad"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"mat-checkbox",1),t.NdJ("change",function(a){return i.checkboxChanged(a)}),t._uU(3,"\n    "),t.TgZ(4,"span",2),t._uU(5,"Highlight pending"),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n"),t.qZA(),t._uU(8,"\n"),t._UZ(9,"mat-divider"),t._uU(10,"\n"),t.TgZ(11,"div",3),t._uU(12,"\n  "),t.YNc(13,I,4,4,"div",4),t._uU(14,"\n"),t.qZA(),t._uU(15,"\n")),2&e&&(t.xp6(13),t.Q6J("ngForOf",i.artWorks))},directives:[A.oG,m.Pi,T.d,u.sg,S.gM,f.z1],styles:[".highlight-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-right:1em}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(10,1fr);overflow-y:auto;height:calc(100vh - 112px);grid-gap:1em;gap:1em;margin:0;padding-top:1em}.container[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:max-content;border-radius:8px;cursor:pointer}.container[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]:hover{background:#80808042}.container[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]   .art-icon.highlighted[_ngcontent-%COMP%]{filter:drop-shadow(2px 5px 10px currentColor)}"]}),n})();function j(n,o){1&n&&(t.TgZ(0,"span",2),t._uU(1,"Fossils"),t.qZA())}function D(n,o){1&n&&(t._uU(0," "),t._UZ(1,"app-fossils"),t._uU(2," "))}function w(n,o){1&n&&(t.TgZ(0,"span",2),t._uU(1,"Art"),t.qZA())}function q(n,o){1&n&&(t._uU(0," "),t._UZ(1,"app-art"),t._uU(2," "))}const L=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-museum"]],decls:17,vars:0,consts:[["mat-tab-label",""],["matTabContent",""],["translate",""]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group"),t._uU(1,"\n  "),t.TgZ(2,"mat-tab"),t._uU(3,"\n    "),t.YNc(4,j,2,0,"ng-template",0),t._uU(5,"\n    "),t.YNc(6,D,3,0,"ng-template",1),t._uU(7,"\n  "),t.qZA(),t._uU(8,"\n  "),t.TgZ(9,"mat-tab"),t._uU(10,"\n    "),t.YNc(11,w,2,0,"ng-template",0),t._uU(12,"\n    "),t.YNc(13,q,3,0,"ng-template",1),t._uU(14,"\n  "),t.qZA(),t._uU(15,"\n"),t.qZA(),t._uU(16,"\n"))},directives:[g.SP,g.uX,g.uD,g.Vc,m.Pi,z,V],styles:[""]}),n})(),data:{title:(0,P.J)("Museum")}}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[C.Bz.forChild(L)],C.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,m.aw,F.m8,O.q,f.mZ,$]]}),n})()}}]);